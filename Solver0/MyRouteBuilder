package Solver;

import org.apache.camel.builder.RouteBuilder;

public class MyRouteBuilder extends RouteBuilder {

    public void configure() {

        from("rabbitmq://136.199.51.111/out?username=&password=&queue=out&skipQueueDeclare=true")
                .process(new MyLogProcessor())
                .choice()
                    .when(body().contains("ERROR"))
                    .to("log:default")
                    .otherwise()
                    .setHeader("From", constant("Hier muss eine E-Mail-Adresse hin"))
                    .convertBodyTo(String.class)
                    .to("smtps://smtp.gmail.com?username=&password=&subject="
                        + "broker" + "&to=" + "Hier muss eine E-Mail-Adresse hin")
                .endChoice()
        ;

    }

}
